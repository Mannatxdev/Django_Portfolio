{% extends "base.html" %}
{% block content %}

<section class="mt-20 text-center">

    <h2 class="text-5xl font-extrabold text-white mb-6">
        Competitive <span class="text-cyan-400">Coding Stats</span>
    </h2>

    <!-- TOTAL COUNTER -->
    <div class="flex justify-center mb-16">
        <div class="bg-slate-900 border border-cyan-500/30 px-16 py-10 rounded-3xl">
            <p class="text-slate-400 uppercase tracking-widest text-sm mb-4">
                Total Problems Solved
            </p>
            <h3 class="text-6xl font-extrabold text-cyan-400 counter"
                data-target="{{ total }}">
                0
            </h3>
        </div>
    </div>

    <!-- PLATFORM CARDS -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">

        {% for stat in stats %}
        <div class="bg-slate-800 border border-slate-700 rounded-2xl p-8 hover:border-cyan-400 transition">

            <h3 class="text-2xl font-bold text-white mb-4">
                {{ stat.get_platform_display }}
            </h3>

            <p class="text-4xl font-bold text-cyan-400 counter"
               data-target="{{ stat.problems_solved }}">
                0
            </p>

            {% if stat.profile_url %}
            <a href="{{ stat.profile_url }}" target="_blank"
               class="text-sm text-cyan-400 mt-4 inline-block hover:underline">
                View Profile â†’
            </a>
            {% endif %}

        </div>
        {% endfor %}

    </div>

</section>

<!-- ANIMATION SCRIPT -->
<script>
document.addEventListener("DOMContentLoaded", function () {

    const counters = document.querySelectorAll('.counter');

    counters.forEach(counter => {
        const target = +counter.getAttribute('data-target');
        let count = 0;
        const speed = 20;

        const updateCount = () => {
            const increment = target / 100;

            if (count < target) {
                count += increment;
                counter.innerText = Math.floor(count);
                setTimeout(updateCount, speed);
            } else {
                counter.innerText = target + "+";
            }
        };

        updateCount();
    });

});
</script>

{% endblock %}